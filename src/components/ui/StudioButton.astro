---
interface Props {
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost';
  href?: string;
  class?: string;
}

const { variant = 'primary', href, class: className } = Astro.props;

const baseStyles = "relative inline-flex h-10 items-center justify-center whitespace-nowrap rounded-md px-8 text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50";

const variants = {
  primary: "bg-primary text-zinc-950 hover:bg-primary/90 shadow-sm",
  // Rainbow variant simulating the border effect
  rainbow: "group relative text-foreground hover:bg-zinc-900/50 overflow-hidden", 
  secondary: "bg-zinc-800 text-zinc-50 hover:bg-zinc-800/80",
  outline: "border border-zinc-800 bg-background hover:bg-zinc-900 hover:text-zinc-50",
  ghost: "hover:bg-zinc-800 hover:text-zinc-50",
};

const Element = href ? 'a' : 'button';
---

{variant === 'rainbow' ? (
  <Element href={href} class:list={[baseStyles, variants.outline, "p-[1px] border-0 overflow-hidden group", className]}>
    <span class="absolute inset-[-1000%] animate-[spin_2s_linear_infinite] bg-[conic-gradient(from_90deg_at_50%_50%,#E2CBFF_0%,#393BB2_50%,#E2CBFF_100%)]" />
    <span class="inline-flex h-full w-full cursor-pointer items-center justify-center rounded-md bg-zinc-950 px-8 py-1 text-sm font-medium text-white backdrop-blur-3xl transition-all group-hover:bg-zinc-900">
      <slot />
    </span>
  </Element>
) : (
  <Element href={href} class:list={[baseStyles, variants[variant], className]}>
    <slot />
  </Element>
)}
